---
// 1. IMPORT (Thêm BaseLayout)
import BaseLayout from '../layouts/BaseLayout.astro'; // (Giả sử đường dẫn layout)

// --- (MỚI) THÊM ĐOẠN NÀY ĐỂ LẤY DATA BLOG ---
import { getCollection } from "astro:content";

// Lấy tất cả bài viết trong collection 'blog'
const allPosts = await getCollection("blog");

// Sắp xếp bài viết: Mới nhất lên đầu
const sortedPosts = allPosts.sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

// Chỉ lấy 3 bài đầu tiên
const recentPosts = sortedPosts.slice(0, 3);

// 2. (SỬA LẠI) TẠO CÁC BIẾN VÀ SCHEMA
const pageTitle = "Phở Gõ Tarot - Trải Bài Tarot Miễn Phí & Luận Giải Sâu Sắc";
const pageDesc = "Khám phá ý nghĩa các lá bài tarot, nhận trải bài 3 lá, Yes/No miễn phí. Phở Gõ Tarot soi sáng con đường của bạn bằng luận giải sâu sắc.";

const schema = {
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Phở Gõ Tarot",
  "url": "https://phogotarot.com/",
  "publisher": {
    "@type": "Organization",
    "name": "Phở Gõ Tarot",
    "logo": {
      "@type": "ImageObject",
      "url": "https://phogotarot.com/images/logo.png" // [cite: 6]
    }
  }
};
---

<BaseLayout
  title={pageTitle}
  description={pageDesc}
>    
    
    <main id="homepage-content">

        <section id="home" class="homepage-section" style="padding-top: 3rem; min-height: 80vh; display: flex; align-items: center;">
            <div class="container">
                <div class="grid-2">
                    <div class="text-center" style="md:text-align: left;">
                        <h2 class="hero-title">Phở Gõ Tarot</h2>
                        <p class="section-text" style="font-size: 1.25rem; margin-bottom: 2rem;">
                            Chào mừng bạn đến với Phở Gõ Tarot, không gian dành riêng cho những ai tìm kiếm sự khai sáng qua lăng kính Tarot huyền bí. Chúng tôi mang đến trải nghiệm Tarot online miễn phí mộc mạc, như một tô phở gõ vỗ về tâm hồn, giúp bạn giải đáp những khúc mắc trong tình cảm, công việc và cuộc sống. Hãy khám phá xem vũ trụ đang "gõ cửa" muốn nhắn nhủ điều gì với bạn và để Phở Gõ Tarot giải mã những thông điệp ấy.
                        </p>
                        <a href="/tarot" class="btn-primary">Xem Tarot Ngay</a>
                    </div>
                    <div style="display:flex;">
                        <div class="spinning-wheel-container">
                            <img src="/wheel.png" alt="Vòng tròn Zodiac" class="section-image spinning-wheel">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <div class="container"><div class="divider"></div></div>

        <section id="about" class="homepage-section">
            <div class="container">
                <div class="grid-2">
                    <div>
                        <img src="/img-1.jpg" alt="Tarot Reader" class="section-image">
                    </div>
                    <div class="text-center" style="md:text-align: left;">
                        <h2 class="section-subtitle">Tarot Là Gì?</h2>
                        <p class="section-text text-left">
                            Tarot là một bộ 78 lá bài, mỗi lá mang một ý nghĩa biểu tượng riêng. Nó không phải để dự đoán tương lai một cách chính xác, mà là một công cụ để tự suy ngẫm, khám phá bản thân và cung cấp một góc nhìn mới về các tình huống trong cuộc sống.
                        </p>
                        <p class="section-text text-left">
                            Một buổi đọc bài tarot có thể giúp bạn hiểu rõ hơn về những thách thức, cơ hội và tiềm năng ẩn giấu bên trong bạn.
                        </p>
                        <a href="#contact" class="btn-outline">Đặt Lịch Đọc Bài</a>
                    </div>
                </div>
            </div>
        </section>

        <section id="services" class="homepage-section bg-alt">
            <div class="container">
                <h2 class="section-title">Các Tính Năng Trải Bài</h2>
                <div class="grid-3">
                    <a href="/tarot" class="magic-card">
                        <div class="icon-glow">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="6" y="2" width="12" height="20" rx="2" transform="rotate(-5 12 12)"></rect>
                                <rect x="6" y="2" width="12" height="20" rx="2" transform="rotate(5 12 12)"></rect>
                                <path d="M12 8v8"></path> <path d="M8 12h8"></path>
                            </svg>
                        </div>
                        <h3 class="magic-title">Trải Bài 3 Lá</h3>
                        <p class="magic-desc">Giải mã Quá khứ, Hiện tại & Tương lai qua lăng kính huyền học.</p>
                        <span class="magic-link">Khám phá &rarr;</span>
                    </a>
                    
                    <a href="/yes-no-reading" class="magic-card">
                        <div class="icon-glow">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                <line x1="12" y1="17" x2="12.01" y2="17"></line>
                            </svg>
                        </div>
                        <h3 class="magic-title">Hỏi Đáp Yes/No</h3>
                        <p class="magic-desc">Câu trả lời dứt khoát "Có" hoặc "Không" cho những băn khoăn tức thời.</p>
                        <span class="magic-link">Lật bài ngay &rarr;</span>
                    </a>
                    
                    <a href="/zodiac-daily" class="magic-card">
                        <div class="icon-glow">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                            </svg>
                        </div>
                        <h3 class="magic-title">Zodiac Tarot</h3>
                        <p class="magic-desc">Thông điệp vũ trụ dành riêng cho cung hoàng đạo của bạn hôm nay.</p>
                        <span class="magic-link">Xem thông điệp &rarr;</span>
                    </a>
                </div>
            </div>
        </section>

        <section id="blog" class="homepage-section">
            <div class="container">
                <h2 class="section-title">Bài Viết Mới</h2>
                
                <div class="grid-3">
                    {/* Bắt đầu vòng lặp lấy 3 bài viết */}
                    {recentPosts.map((post) => (
                        <div class="blog-card mdf-blog">
                            {/* Hiển thị ảnh bài viết */}
                            <img 
                                src={post.data.image} 
                                alt={post.data.title} 
                                class="section-image"
                                style="object-fit: cover;" 
                            />
                            
                            {/* Tiêu đề bài viết */}
                            <h3 class="section-subtitle" style="font-size: 1.25rem; text-align: left; padding: 0 1rem;">
                                {post.data.title}
                            </h3>
                            
                            {/* Mô tả ngắn (nếu có) */}
                            <p class="section-text" style="font-size: 0.9rem; text-align: left; opacity: 0.8; padding: 0 1rem;">
                                {post.data.excerpt}
                            </p>
                            
                            {/* Link đến bài viết chi tiết */}
                            <a href={`/blog/${post.slug}`} class="btn-outline" style="font-size: 0.9rem; float: left; margin: 0 1rem 1rem;">
                                Đọc tiếp &rarr;
                            </a>
                        </div>
                    ))}
                </div>
                
            </div>
        </section>

        <section id="faq" class="homepage-section">
            <div class="container">
                <h2 class="section-title">Thắc Mắc Thường Gặp</h2>
                
                <div class="faq-container">
                    <details class="faq-item">
                        <summary class="faq-question">Xem Tarot online có chính xác như xem trực tiếp không?</summary>
                        <div class="faq-answer">
                            <p>Hoàn toàn chính xác. Tarot kết nối dựa trên năng lượng và trực giác, những yếu tố này không bị giới hạn bởi khoảng cách vật lý hay màn hình điện thoại. Chỉ cần bạn tập trung và mở lòng, thông điệp gửi đến bạn vẫn sẽ trọn vẹn.</p>
                        </div>
                    </details>

                    <details class="faq-item">
                        <summary class="faq-question">Mình chưa biết nên hỏi gì thì có xem được không?</summary>
                        <div class="faq-answer">
                            <p>Đừng lo nhé! Nếu bạn đang rối bời, Reader của Phở Gõ sẽ giúp bạn gỡ rối và định hình câu hỏi. Chúng mình cũng có những trải bài tổng quan để bạn nắm bắt tình hình chung mà không cần câu hỏi cụ thể.</p>
                        </div>
                    </details>

                    <details class="faq-item">
                        <summary class="faq-question">Thông tin câu chuyện của mình có được bảo mật không?</summary>
                        <div class="faq-answer">
                            <p>Tuyệt đối bảo mật. Mọi chia sẻ của bạn với Phở Gõ Tarot đều được giữ kín như "công thức gia truyền". Chúng mình tôn trọng sự riêng tư tuyệt đối của mọi khách hàng.</p>
                        </div>
                    </details>
                    
                     <details class="faq-item">
                        <summary class="faq-question">Làm sao để đặt lịch xem bài?</summary>
                        <div class="faq-answer">
                            <p>Bạn chỉ cần bấm vào nút "Đặt lịch tư vấn" bên dưới hoặc nhắn tin trực tiếp qua Fanpage. Tụi mình sẽ phản hồi và sắp xếp khung giờ phù hợp nhất cho bạn ngay lập tức.</p>
                        </div>
                    </details>
                </div>

            </div>
        </section>

        <section id="oracle" class="homepage-section bg-alt">
            <div class="container">
                <div class="grid-2">
                    <div class="text-center" style="md:text-align: left;">
                        <h2 class="section-subtitle">Cần tư vấn từ<br>chuyên gia?</h2>
                        <p class="section-text text-left">
                            Nếu trong quá trình đọc bài bạn vẫn còn điều gì băn khoăn hoặc muốn được giải thích chi tiết hơn, cứ thoải mái liên hệ với Phở Gõ nhé. Chúng mình luôn sẵn sàng hỗ trợ để bạn hiểu rõ vấn đề một cách nhanh chóng và chính xác nhất.
                        </p>
                        <a href="/contact" class="btn-primary">Đặt lịch tư vấn</a>
                    </div>
                    <div>
                        <img src="/img-2.jpg" alt="Oracle Cards" class="section-image">
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <style>
        /* === 1. HIỆU ỨNG SAO (GIỮ NGUYÊN GỐC) === */
        #stars-bg {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            overflow: hidden; z-index: 0;
        }
        #stars-bg::after {
            content: ''; position: absolute; top: 10%; right: 15%;
            width: 50px; height: 50px; border-radius: 50%;
            /* ĐỔI: Shadow trăng sang vàng nhẹ */
            box-shadow: -10px 5px 0 0px #F2C94C; 
            opacity: 0.5; animation: moon-glow 10s ease-in-out infinite alternate;
        }
        #stars-bg::before {
            content: ''; position: absolute; bottom: 5%; left: 10%;
            width: 200px; height: 100px;
            /* ĐỔI: Gradient nền sao sang vàng nhạt */
            background: radial-gradient(ellipse at center, rgba(242, 201, 76, 0.15) 0%, rgba(242, 201, 76, 0) 70%);
            border-radius: 50%; transform: rotate(-30deg);
            opacity: 0.5; animation: moon-glow 15s ease-in-out infinite alternate;
        }
        .star {
            position: absolute; border-radius: 50%; background: white;
            opacity: 0.6; animation: twinkle 3s infinite ease-in-out;
        }
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.2); }
        }
         @keyframes moon-glow {
            from { opacity: 0.3; transform: rotate(-5deg); }
            to { opacity: 0.6; transform: rotate(5deg); }
        }

        /* === 2. BỐ CỤC CHUNG (GIỮ NGUYÊN GỐC) === */
        .homepage-section {
            padding: 4rem 1rem; position: relative; z-index: 1; width: 100%;
        }
        .homepage-section.bg-alt {
            border-radius: 12px; margin: 2rem auto; max-width: 1200px;
        }
        .container {
            max-width: 1200px; margin: 0 auto; padding: 0 1rem;
        }
        /* Grid System giữ nguyên */
        .grid-2 { display: grid; grid-template-columns: 1fr; gap: 2rem; align-items: center; }
        @media (min-width: 768px) { .grid-2 { grid-template-columns: repeat(2, 1fr); } }
        .grid-3 { display: grid; grid-template-columns: 1fr; gap: 1.5rem; }
        @media (min-width: 768px) { .grid-3 { grid-template-columns: repeat(3, 1fr); } }
        .text-center { text-align: center; }
        .text-left { text-align: left; }
        
        /* === 3. TYPOGRAPHY (CẬP NHẬT SHADOW VÀNG) === */
        .hero-title {
            font-family: var(--font-title);
            color: var(--title-color);
            font-size: clamp(2.5rem, 7vw, 4rem);
            /* ĐỔI: Shadow xanh -> Shadow vàng rực rỡ */
            text-shadow: 0 0 20px rgb(242 201 76), 0 0 8px rgba(242, 201, 76, 0.8);
            margin-bottom: 1.5rem;
        }
        .section-title {
            font-family: var(--font-title);
            color: var(--title-color);
            font-size: clamp(2rem, 6vw, 3rem);
            /* ĐỔI: Shadow xanh -> Shadow vàng */
            text-shadow: 0 0 15px var(--gold-shadow);
            margin-bottom: 3rem; text-align: center;
        }
        .section-subtitle {
            font-family: var(--font-title);
            color: var(--title-color);
            font-size: clamp(2rem,6vw,3rem);
            /* ĐỔI: Shadow xanh -> Shadow vàng */
            text-shadow: 0 0 15px rgba(242, 201, 76, 0.8), 0 0 5px rgba(242, 201, 76, 0.6);
            margin-bottom: 1.5rem;
        }
        .section-text {
            font-size: 1.1rem; line-height: 1.7; opacity: 0.9; margin-bottom: 1.5rem;
            text-shadow: none; 
        }

        /* === 4. BUTTONS (ĐỔI SANG MÀU VÀNG) === */
        .btn-primary {
            display: inline-block;
            /* ĐỔI: Nền vàng */
            background-color: #F2C94C; 
            color: #0b132b; /* Chữ đen cho dễ đọc trên nền vàng */
            border: none;
            padding: 0.8rem 2rem; border-radius: 8px;
            font-family: var(--font-body); font-size: 1rem; font-weight: 600;
            cursor: pointer; transition: all 0.3s;
            text-decoration: none; text-shadow: none;
            /* Thêm shadow vàng cho nút */
            box-shadow: 0 0 10px rgba(242, 201, 76, 0.4);
        }
        .btn-primary:hover {
            background-color: #ffdb73; /* Vàng sáng hơn khi hover */
            box-shadow: 0 0 20px rgba(242, 201, 76, 0.7);
        }

        .btn-outline {
            display: inline-block;
            background-color: transparent;
            /* ĐỔI: Viền vàng, chữ vàng */
            border: 1px solid #F2C94C;
            color: #F2C94C;
            padding: 0.75rem 1.5rem; border-radius: 8px;
            font-family: var(--font-body); font-weight: 600;
            cursor: pointer; transition: all 0.3s;
            text-decoration: none; text-shadow: none;
        }
        .btn-outline:hover {
            background-color: rgba(242, 201, 76, 0.2); /* Nền vàng trong suốt */
            color: #fff;
            box-shadow: 0 0 15px rgba(242, 201, 76, 0.4);
        }

        /* === 5. CÁC CLASS CŨ TỪ FILE GỐC (MAGIC CARD & BLOG) === */
        /* Giữ nguyên logic hiển thị icon/card như file gốc bạn gửi nhưng đổi màu */
        
        .magic-card {
            display: flex; flex-direction: column; align-items: center; text-align: center;
            padding: 2.5rem 1.5rem;
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px; text-decoration: none;
            transition: all 0.4s ease; position: relative; overflow: hidden;
        }
        .magic-card:hover {
            transform: translateY(-8px);
            background: rgba(255, 255, 255, 0.08);
            /* ĐỔI: Viền hover sang vàng */
            border-color: rgba(242, 201, 76, 0.5);
            box-shadow: 0 0 30px rgba(242, 201, 76, 0.15);
        }

        .icon-glow {
            width: 60px; height: 60px; margin-bottom: 1.5rem;
            /* ĐỔI: Icon màu vàng */
            color: #F2C94C; 
            filter: drop-shadow(0 0 8px rgba(242, 201, 76, 0.6));
            transition: transform 0.5s ease;
        }
        .magic-card:hover .icon-glow {
            transform: scale(1.2) rotate(5deg);
            color: #fff;
            filter: drop-shadow(0 0 12px rgba(242, 201, 76, 1));
        }

        .magic-title {
            font-family: var(--font-title); font-size: 1.5rem; color: var(--title-color); margin-bottom: 0.8rem;
        }
        .magic-desc {
            font-size: 0.95rem; color: var(--text-color); opacity: 0.8; line-height: 1.6; margin-bottom: 1.5rem;
        }
        .magic-link {
            font-size: 0.9rem; font-weight: bold; color: #F2C94C;
            text-transform: uppercase; letter-spacing: 1px; margin-top: auto; transition: all 0.3s;
        }
        .magic-card:hover .magic-link {
            letter-spacing: 2px; text-shadow: 0 0 5px rgba(242, 201, 76, 0.8);
        }

        /* === 6. HÌNH ẢNH & VÒNG XOAY (CÓ ÁNH VÀNG) === */
        .section-image {
            width: 100%; height: auto; border-radius: 12px 12px 0 0;
            object-fit: cover; border: 1px solid var(--card-back-border);
        }
        .blog-card .section-image {
            height: 200px; margin-bottom: 1.5rem;
        }

        /* CSS CHO VÒNG XOAY & ÁNH VÀNG */
        .spinning-wheel-container {
            max-width: 550px; margin: auto; width: 100%; aspect-ratio: 1 / 1;
            border-radius: 50%; overflow: hidden;
            /* ĐỔI: Thêm boxShadow vàng rực quanh vòng xoay */
            
            background: radial-gradient(circle, rgb(242 201 76 / 20%) 0%, #0000000d 56%);
        }
        .spinning-wheel-container .section-image {
            border-radius: 0; border: none;
        }
        /* Animation xoay */
        @keyframes spin-clockwise {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .spinning-wheel {
            animation: spin-clockwise 20s linear infinite;
            /* ĐỔI: Thêm drop-shadow vàng cho chính tấm ảnh xoay */
            filter: drop-shadow(0 0 10px rgba(242, 201, 76, 0.5));
        }

        /* Các class phụ trợ từ file gốc */
        .blog-card{
            border: 1px solid var(--gold-border);
            background-color: var(--button-bg);
            border-radius: 12px;
        }


        .blog-card .section-subtitle { text-align: left; }
        .blog-card .section-text { text-align: left; opacity: 0.8; }
        .blog-card .btn-outline { float: left; }
        .divider {
            height: 1px; background-color: var(--card-back-border);
            opacity: 0.5; margin: 2rem 0; max-width: 1200px;
            margin-left: auto; margin-right: auto;
        }
        .mdf-blog{ padding: 0 !important; }
        .mdf-sub{ padding: 0 1rem !important; }

        /* === 7. FAQ (ĐỔI SANG STYLE VÀNG) === */
        .faq-container { max-width: 800px; margin: 0 auto; }
        .faq-item {
            background-color: var(--button-bg); border: 1px solid var(--card-back-border);
            border-radius: 12px; margin-bottom: 1rem; overflow: hidden; transition: all 0.3s ease;
        }
        .faq-item:hover {
            box-shadow: 0 0 15px rgba(242, 201, 76, 0.2); /* Shadow vàng */
            border-color: #F2C94C;
        }
        .faq-question {
            padding: 1.2rem 1.5rem; font-family: var(--font-title); font-size: 1.1rem;
            color: var(--title-color); cursor: pointer; list-style: none;
            position: relative; font-weight: 600; display: flex; justify-content: space-between; align-items: center;
        }
        .faq-question::after {
            content: '+'; font-size: 1.5rem; font-weight: bold;
            color: #F2C94C; /* Dấu cộng màu vàng */
            transition: transform 0.3s ease;
        }
        details[open] .faq-question::after { transform: rotate(45deg); }
        .faq-question::-webkit-details-marker { display: none; }
        .faq-answer {
            padding: 0 1.5rem 1.5rem 1.5rem; color: var(--text-color);
            font-size: 1rem; line-height: 1.6; opacity: 0.9;
            border-top: 1px solid rgba(142, 186, 255, 0.1); margin-top: 0; padding-top: 1rem;
        }
        details[open] .faq-answer { animation: fadeIn 0.5s ease; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-5px); }
            to { opacity: 0.9; transform: translateY(0); }
        }
    </style>
</BaseLayout>