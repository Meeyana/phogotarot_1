---
// 1. IMPORT
import BaseLayout from '../layouts/BaseLayout.astro';

// 2. T·∫†O METADATA V√Ä SCHEMA
const pageTitle = "Zodiac Tarot H√†ng Ng√†y - L√° B√†i Cung Ho√†ng ƒê·∫°o | Ph·ªü G√µ Tarot";
const pageDesc = "Kh√°m ph√° l√° b√†i Tarot h√†ng ng√†y cho 12 cung ho√†ng ƒë·∫°o. Nh·∫≠n th√¥ng ƒëi·ªáp v√† l·ªùi khuy√™n t·ª´ v≈© tr·ª• cho B·∫°ch D∆∞∆°ng, Kim Ng∆∞u, Song T·ª≠, v.v.";
const pageUrl = new URL('/zodiac-daily', Astro.site).href;

const schema = {
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": pageTitle,
  "description": pageDesc,
  "url": pageUrl,
  "isPartOf": {
    "@type": "WebSite",
    "url": Astro.site ? Astro.site.href : "https://phogotarot.com/"
  }
};
---

<BaseLayout
  title={pageTitle}
  description={pageDesc}
>

    <main id="zodiac-page-content">
        <div class="zodiac-container">
            
            <div class="page-header-center">
                 <h1 class="title">Th√¥ng ƒêi·ªáp Zodiac H√†ng Ng√†y</h1>
                 <p class="subtitle">Ch·ªçn cung ho√†ng ƒë·∫°o c·ªßa b·∫°n ƒë·ªÉ nh·∫≠n l·ªùi khuy√™n t·ª´ v≈© tr·ª•</p>
            </div>

            <div class="zodiac-main-content">

                <!-- HEADER CUNG -->
                <div class="zodiac-header">
                    <div class="zodiac-title-group">
                        <h2 id="main-zodiac-name" class="zodiac-title">B·∫°ch D∆∞∆°ng</h2>
                    </div>
                    <span id="main-zodiac-date" class="zodiac-date"></span>
                </div>

                <!-- GRID DESKTOP -->
                <div id="zodiac-selector" class="zodiac-grid">
                    <button class="zodiac-btn active" data-zodiac="B·∫°ch D∆∞∆°ng"><span class="zodiac-icon">‚ôà</span> B·∫°ch D∆∞∆°ng</button>
                    <button class="zodiac-btn" data-zodiac="Kim Ng∆∞u"><span class="zodiac-icon">‚ôâ</span> Kim Ng∆∞u</button>
                    <button class="zodiac-btn" data-zodiac="Song T·ª≠"><span class="zodiac-icon">‚ôä</span> Song T·ª≠</button>
                    <button class="zodiac-btn" data-zodiac="C·ª± Gi·∫£i"><span class="zodiac-icon">‚ôã</span> C·ª± Gi·∫£i</button>
                    <button class="zodiac-btn" data-zodiac="S∆∞ T·ª≠"><span class="zodiac-icon">‚ôå</span> S∆∞ T·ª≠</button>
                    <button class="zodiac-btn" data-zodiac="X·ª≠ N·ªØ"><span class="zodiac-icon">‚ôç</span> X·ª≠ N·ªØ</button>
                    <button class="zodiac-btn" data-zodiac="Thi√™n B√¨nh"><span class="zodiac-icon">‚ôé</span> Thi√™n B√¨nh</button>
                    <button class="zodiac-btn" data-zodiac="B·ªç C·∫°p"><span class="zodiac-icon">‚ôè</span> B·ªç C·∫°p</button>
                    <button class="zodiac-btn" data-zodiac="Nh√¢n M√£"><span class="zodiac-icon">‚ôê</span> Nh√¢n M√£</button>
                    <button class="zodiac-btn" data-zodiac="Ma K·∫øt"><span class="zodiac-icon">‚ôë</span> Ma K·∫øt</button>
                    <button class="zodiac-btn" data-zodiac="B·∫£o B√¨nh"><span class="zodiac-icon">‚ôí</span> B·∫£o B√¨nh</button>
                    <button class="zodiac-btn" data-zodiac="Song Ng∆∞"><span class="zodiac-icon">‚ôì</span> Song Ng∆∞</button>
                </div>
                
                <!-- DROPDOWN MOBILE -->
                <div class="zodiac-dropdown-container">
                    <button id="zodiac-dropdown-toggle" class="zodiac-dropdown-toggle">
                        <span id="zodiac-dropdown-label">
                            <span class="zodiac-icon">‚ôà</span> B·∫°ch D∆∞∆°ng
                        </span>
                        <svg class="dropdown-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="16" height="16">
                            <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.25 4.25a.75.75 0 01-1.06 0L5.23 8.29a.75.75 0 01.02-1.06z" clip-rule="evenodd"></path>
                        </svg>
                    </button>
                    <div id="zodiac-dropdown-list" class="zodiac-dropdown-menu">
                        <button class="zodiac-btn-dropdown active" data-zodiac="B·∫°ch D∆∞∆°ng"><span class="zodiac-icon">‚ôà</span> B·∫°ch D∆∞∆°ng</button>
                        <button class="zodiac-btn-dropdown" data-zodiac="Kim Ng∆∞u"><span class="zodiac-icon">‚ôâ</span> Kim Ng∆∞u</button>
                        <button class="zodiac-btn-dropdown" data-zodiac="Song T·ª≠"><span class="zodiac-icon">‚ôä</span> Song T·ª≠</button>
                        <button class="zodiac-btn-dropdown" data-zodiac="C·ª± Gi·∫£i"><span class="zodiac-icon">‚ôã</span> C·ª± Gi·∫£i</button>
                        <button class="zodiac-btn-dropdown" data-zodiac="S∆∞ T·ª≠"><span class="zodiac-icon">‚ôå</span> S∆∞ T·ª≠</button>
                        <button class="zodiac-btn-dropdown" data-zodiac="X·ª≠ N·ªØ"><span class="zodiac-icon">‚ôç</span> X·ª≠ N·ªØ</button>
                        <button class="zodiac-btn-dropdown" data-zodiac="Thi√™n B√¨nh"><span class="zodiac-icon">‚ôé</span> Thi√™n B√¨nh</button>
                        <button class="zodiac-btn-dropdown" data-zodiac="B·ªç C·∫°p"><span class="zodiac-icon">‚ôè</span> B·ªç C·∫°p</button>
                        <button class="zodiac-btn-dropdown" data-zodiac="Nh√¢n M√£"><span class="zodiac-icon">‚ôê</span> Nh√¢n M√£</button>
                        <button class="zodiac-btn-dropdown" data-zodiac="Ma K·∫øt"><span class="zodiac-icon">‚ôë</span> Ma K·∫øt</button>
                        <button class="zodiac-btn-dropdown" data-zodiac="B·∫£o B√¨nh"><span class="zodiac-icon">‚ôí</span> B·∫£o B√¨nh</button>
                        <button class="zodiac-btn-dropdown" data-zodiac="Song Ng∆∞"><span class="zodiac-icon">‚ôì</span> Song Ng∆∞</button>
                    </div>
                </div>

                <!-- KHU V·ª∞C HI·ªÇN TH·ªä L√Å B√ÄI -->
                <div id="card-display" class="zodiac-card-display">
                    
                    <div class="zodiac-card-layout">
                        <!-- ·∫¢nh l√° b√†i -->
                        <div class="zodiac-card-image-wrapper">
                            <div class="zodiac-card-image-aspect">
                                <img id="card-image" 
                                     src="https://placehold.co/300x500/142850/f0f0ff?text=Loading" 
                                     alt="H√¨nh ·∫£nh l√° b√†i Tarot" 
                                     class="zodiac-card-image">
                            </div>
                        </div>

                        <!-- Th√¥ng tin ch√≠nh -->
                        <div class="zodiac-card-details">
                            <div class="zodiac-card-header">
                                <h3 id="card-prefix" class="card-prefix"></h3>
                                <h2 id="card-name" class="card-name"></h2>
                            </div>
                            
                            <div class="card-advice-group">
                                <span class="card-advice-label"><i class="fa-solid fa-key"></i> T·ª´ kh√≥a:</span>
                                <p id="card-advice" class="card-advice"></p>
                            </div>

                            <div id="card-summary" class="card-summary" style="display: none;"><p></p></div>
                            
                            <!-- (ƒê√É S·ª¨A) Chi ti·∫øt may m·∫Øn - Danh s√°ch d·ªçc -->
                            <div id="card-lucky-details" class="card-lucky-details">
                                <h4 class="lucky-title">
                                    <i class="fa-solid fa-wand-magic-sparkles"></i> T√≠n hi·ªáu may m·∫Øn
                                </h4>
                                <ul class="lucky-items-list">
                                    <li>
                                        <span class="lucky-label">M√†u s·∫Øc:</span> 
                                        <span id="lucky-color" class="lucky-value"></span>
                                    </li>
                                    <li>
                                        <span class="lucky-label">ƒê·ªì v·∫≠t:</span> 
                                        <span id="lucky-item" class="lucky-value"></span>
                                    </li>
                                    <li>
                                        <span class="lucky-label">ƒê·ªãa ƒëi·ªÉm:</span> 
                                        <span id="lucky-place" class="lucky-value"></span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- PH√ÇN T√çCH CHI TI·∫æT -->
                    <div class="zodiac-card-analysis">
                        <div id="card-love" class="analysis-item">
                            <h4 class="analysis-title" style="color: #ff8a8a;">
                                <i class="fa-solid fa-heart"></i> T√¨nh c·∫£m
                            </h4>
                            <p></p>
                        </div>
                        <div id="card-work" class="analysis-item">
                            <h4 class="analysis-title" style="color: #82aaff;">
                                <i class="fa-solid fa-briefcase"></i> C√¥ng vi·ªác
                            </h4>
                            <p></p>
                        </div>
                        <div id="card-finance" class="analysis-item">
                            <h4 class="analysis-title" style="color: #a5d6a7;">
                                <i class="fa-solid fa-money-bill-wave"></i> T√†i ch√≠nh
                            </h4>
                            <p></p>
                        </div>
                    </div>

                    <!-- L·ªùi khuy√™n -->
                    <div id="card-advice-box" class="zodiac-advice-box">
                        <h4 class="analysis-title" style="color: var(--gold-color, #F2C94C);">
                            <i class="fa-solid fa-lightbulb"></i> L·ªùi khuy√™n v≈© tr·ª•
                        </h4>
                        <div id="card-advice-content" class="advice-content-simple">
                            <p></p>
                        </div>
                    </div>

                    <!-- (ƒê√É S·ª¨A) N√∫t chia s·∫ª -->
                    <div style="text-align: center; margin-top: 2rem; padding-top: 2rem; border-top: 1px solid rgba(255,255,255,0.1);">
                        <button id="zodiac-share-btn" class="zodiac-share-btn">
                            <i class="fa-solid fa-share-nodes"></i>
                            Chia s·∫ª th√¥ng ƒëi·ªáp n√†y
                        </button>
                    </div>
                    
                </div>

                <div class="zodiac-detailed-reading-box">
                    <h3 class="subscribe-title">Ng√†y h√¥m nay c·ªßa b·∫°n c√≤n ƒëi·ªÅu g√¨ ·∫©n gi·∫•u?</h3>
                    <a href="/tarot" class="zodiac-action-btn">
                        <i class="fa-solid fa-layer-group"></i>
                        Tr·∫£i B√†i Chi Ti·∫øt Ngay
                    </a>
                </div>

                <!-- (ƒê√É THI·∫æT K·∫æ L·∫†I - MINIMAL) FORM SUBSCRIBE -->
                <div class="zodiac-subscribe-simple">
                    <p class="sub-text">ƒêƒÉng k√Ω ƒë·ªÉ nh·∫≠n th√¥ng ƒëi·ªáp v≈© tr·ª• v√†o email m·ªói s√°ng</p>
                    <form class="sub-form-simple">
                        <input type="email" placeholder="Nh·∫≠p email c·ªßa b·∫°n..." required>
                        <button type="submit">
                            <i class="fa-solid fa-paper-plane"></i>
                        </button>
                    </form>
                </div>
                
            </div>
        </div>
    </main>

    <script type="application/ld+json" slot="head" set:html={JSON.stringify(schema)} />

    <style>
        /* --- LAYOUT CHUNG --- */
        #zodiac-page-content {
            position: relative; z-index: 1;
            padding-top: 5rem; padding-bottom: 3rem;
        }
        .zodiac-container { max-width: 1000px; margin: 0 auto; padding: 0 1rem; }
        .zodiac-main-content { display: flex; flex-direction: column; gap: 2.5rem; }

        /* HEADER */
        .page-header-center { text-align: center; margin-bottom: 3rem; }
        .title {
            font-family: var(--font-title); color: #ffffff; font-size: clamp(2.2rem, 6vw, 3.5rem);
            font-weight: 700; margin-bottom: 0.5rem;
            text-shadow: 0 0 15px rgba(242, 201, 76, 0.6), 0 0 30px rgba(242, 201, 76, 0.3);
        }
        .subtitle { font-size: 1.1rem; color: #ccc; margin: 0; text-shadow: none; }

        .zodiac-header { display: flex; flex-direction: column; gap: 0.5rem; margin-bottom: 1rem; }
        .zodiac-title-group { display: flex; align-items: center; gap: 1rem; }
        .zodiac-title {
            font-family: var(--font-title); color: var(--gold-color, #F2C94C);
            font-size: 2rem; font-weight: 700; margin: 0;
            text-shadow: 0 0 15px rgba(242, 201, 76, 0.3);
        }
        .zodiac-date {
            font-size: 1.1rem; font-weight: 600; color: #fff; opacity: 0.8; font-family: var(--font-body);
        }
        @media (min-width: 640px) {
            .zodiac-header { flex-direction: row; justify-content: space-between; align-items: center; }
        }

        /* --- GRID CH·ªåN CUNG --- */
        .zodiac-grid {
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 0.8rem;
        }
        @media (min-width: 500px) { .zodiac-grid { grid-template-columns: repeat(4, 1fr); } }
        @media (min-width: 900px) { .zodiac-grid { grid-template-columns: repeat(6, 1fr); } }
        
        .zodiac-btn {
            background-color: rgba(20, 40, 80, 0.7); 
            border: 1px solid rgba(142, 186, 255, 0.3);
            color: #e2e8f0;
            padding: 0.7rem 0.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: var(--font-body); 
            font-weight: 600; 
            font-size: 0.9rem;
            display: flex; flex-direction: column; 
            align-items: center; justify-content: center; 
            gap: 0.3rem; text-shadow: none; height: 100%;
        }
        
        .zodiac-btn:hover {
            background-color: rgba(30, 60, 120, 0.9);
            border-color: var(--gold-color, #F2C94C);
            color: #fff;
            box-shadow: 0 0 15px rgba(242, 201, 76, 0.5), inset 0 0 10px rgba(242, 201, 76, 0.2);
            transform: translateY(-2px);
        }

        .zodiac-btn.active {
            background: linear-gradient(135deg, #D4AF37 0%, #F2C94C 100%);
            color: #050A1F; 
            border-color: transparent;
            box-shadow: 0 0 20px rgba(242, 201, 76, 0.6);
            font-weight: 700;
        }
        .zodiac-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .zodiac-icon { font-size: 1.4rem; }
        
        @media (min-width: 640px) {
             .zodiac-btn { flex-direction: row; gap: 0.5rem; }
             .zodiac-icon { font-size: 1.1rem; }
        }

        /* --- DROPDOWN (MOBILE) --- */
        .zodiac-dropdown-container { display: none; position: relative; margin-bottom: 1.5rem; }
        @media (max-width: 400px) {
            .zodiac-grid { display: none; }
            .zodiac-dropdown-container { display: block; }
        }
        .zodiac-dropdown-toggle {
            width: 100%; background: rgba(20, 40, 80, 0.7); border: 1px solid rgba(142, 186, 255, 0.3);
            color: #fff; padding: 0.9rem 1.2rem; border-radius: 12px; cursor: pointer;
            display: flex; justify-content: space-between; align-items: center;
            font-family: var(--font-body); font-weight: 700; font-size: 1.1rem;
            transition: all 0.3s; text-shadow: none;
        }
        .zodiac-dropdown-toggle:hover { border-color: var(--gold-color, #F2C94C); box-shadow: 0 0 15px rgba(242, 201, 76, 0.3); }
        
        .zodiac-dropdown-menu {
            display: none; position: absolute; top: 110%; left: 0; width: 100%; z-index: 100;
            background-color: #0b132b; border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px; padding: 0.5rem 0; max-height: 300px; overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0,0,0,0.8);
        }
        .zodiac-dropdown-menu.open { display: block; animation: slideDown 0.2s ease-out; }
        .zodiac-dropdown-menu::-webkit-scrollbar { width: 5px; }
        .zodiac-dropdown-menu::-webkit-scrollbar-track { background: transparent; }
        .zodiac-dropdown-menu::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 10px; }

        .zodiac-btn-dropdown {
            background: transparent; border: none; width: 100%; text-align: left;
            color: #ccc; padding: 0.8rem 1.2rem; cursor: pointer;
            font-size: 1rem; font-weight: 600; transition: all 0.2s; display: flex; gap: 0.8rem;
        }
        .zodiac-btn-dropdown:hover, .zodiac-btn-dropdown.active {
            background: rgba(255,255,255,0.05); color: var(--gold-color, #F2C94C);
        }
        @keyframes slideDown { from{opacity:0;transform:translateY(-5px)} to{opacity:1;transform:translateY(0)} }

        /* --- CARD DISPLAY --- */
        .zodiac-card-display {
            background: rgba(11, 19, 43, 0.6); border: 1px solid rgba(242, 201, 76, 0.3);
            border-radius: 16px; padding: 1rem; backdrop-filter: blur(10px);
            box-shadow: 0 10px 40px rgba(0,0,0,0.3); min-height: 300px;
        }
        .zodiac-card-layout { display: flex; flex-direction: column; gap: 2rem; }
        .zodiac-card-image-wrapper { flex-shrink: 0; width: 100%; }
        .zodiac-card-image-aspect {
            position: relative; width: 100%; padding-top: 155%; border-radius: 12px; overflow: hidden;
            border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 5px 20px rgba(0,0,0,0.4);
        }
        .zodiac-card-image { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; }
        .zodiac-card-details { flex-grow: 1; }
        .zodiac-card-header { display: flex; align-items: baseline; gap: 0.8rem; margin-bottom: 1rem; flex-wrap: wrap;}
        .card-prefix { font-family: var(--font-title); font-size: 2rem; font-weight: 700; color: rgba(255,255,255,0.6); margin: 0; line-height: 1; }
        .card-name { font-family: var(--font-title); font-size: 2.5rem; font-weight: 700; color: #fff; margin: 0; line-height: 1; text-shadow: 0 0 10px rgba(242, 201, 76, 0.4); }
        .card-advice-group { margin-bottom: 1.5rem; font-size: 1.1rem; }
        .card-advice-label { font-weight: 600; color: var(--gold-color, #F2C94C); margin-right: 0.5rem; }
        .card-advice { display: inline; font-weight: 700; color: #fff; margin: 0; }

        @media (min-width: 768px) {
            .zodiac-card-layout { flex-direction: row; align-items: flex-start; }
            .zodiac-card-image-wrapper { width: 35%; max-width: 300px; }
            .zodiac-card-details { width: 65%; }
        }

        /* --- ANALYSIS SECTIONS --- */
        .zodiac-card-analysis {
            display: grid; grid-template-columns: 1fr;
            gap: 1.5rem; margin-top: 2rem; padding-top: 2rem;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        .analysis-item p { margin: 0; font-size: 0.95rem; line-height: 1.7; color: #ddd; text-shadow: none; }
        .analysis-title {
            font-family: var(--font-title); font-size: 1.2rem; font-weight: 700;
            margin: 0 0 0.5rem 0; display: flex; align-items: center; gap: 0.5rem;
        }

        /* --- (ƒê√É S·ª¨A) LUCKY DETAILS: XU·ªêNG D√íNG M·ªñI M·ª§C --- */
        .card-lucky-details {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px; padding: 1.5rem; margin-top: 1.5rem;
        }
        .lucky-title { font-family: var(--font-title); font-size: 1.1rem; color: var(--gold-color, #F2C94C); margin: 0 0 1rem 0; }
        
        .lucky-items-list {
            list-style: none; padding: 0; margin: 0;
            display: flex; flex-direction: column; /* X·∫øp d·ªçc */
            gap: 1rem;
        }
        .lucky-items-list li {
            font-size: 0.95rem; color: #ccc;
            display: block; /* ƒê·ªÉ xu·ªëng d√≤ng n·∫øu n·ªôi dung d√†i */
        }
        .lucky-label {
            font-weight: 700; color: #fff; display: inline-block; margin-right: 0.5rem;
        }
        .lucky-value { color: #e0e0e0; }

        /* ADVICE BOX */
        .zodiac-advice-box {
            margin-top: 2rem; background: linear-gradient(145deg, rgba(242, 201, 76, 0.1) 0%, rgba(11, 19, 43, 0.5) 100%);
            border: 1px solid rgba(242, 201, 76, 0.3); border-radius: 12px; padding: 1rem;
        }
        .advice-content-simple p { margin: 0; font-size: 1rem; line-height: 1.7; color: #fff; font-style: italic; text-shadow: none; }

        /* SHARE BTN */
        .zodiac-share-btn {
            background: transparent; border: 1px solid var(--gold-color, #F2C94C);
            color: var(--gold-color, #F2C94C); padding: 0.6rem 1.5rem; border-radius: 50px;
            font-weight: 600; cursor: pointer; transition: all 0.3s; display: inline-flex; align-items: center; gap: 0.5rem;
        }
        .zodiac-share-btn:hover { background: rgba(242, 201, 76, 0.1); color: #fff; box-shadow: 0 0 15px rgba(242, 201, 76, 0.2); }

        /* CTA BOX */
        .zodiac-detailed-reading-box {
            background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px; padding: 2rem; text-align: center; margin-top: 3rem;
        }
        .zodiac-action-btn {
            background: linear-gradient(135deg, #D4AF37 0%, #F2C94C 50%, #FFD700 100%);
            color: #050A1F; padding: 1rem 2.5rem; border-radius: 50px; font-weight: 700; text-decoration: none;
            font-size: 1.1rem; display: inline-flex; align-items: center; gap: 0.8rem;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3); transition: all 0.3s;
        }
        .zodiac-action-btn:hover {
            transform: translateY(-3px); box-shadow: 0 6px 25px rgba(242, 201, 76, 0.6);
            background: linear-gradient(135deg, #FFF 0%, #FFD700 50%, #F2C94C 100%);
        }

        /* --- (ƒê√É THI·∫æT K·∫æ L·∫†I T·ªêI GI·∫¢N) SUBSCRIBE SECTION --- */
        .zodiac-subscribe-simple {
            margin-top: 3rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            gap: 1rem;
            padding: 1.5rem;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        .sub-text {
            font-size: 1rem; color: #ccc; margin: 0;
            font-family: var(--font-title);
            letter-spacing: 0.5px;
        }
        .sub-form-simple {
            display: flex;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 50px;
            padding: 0.25rem;
            transition: all 0.3s;
            max-width: 400px;
            width: 100%;
        }
        .sub-form-simple:focus-within {
            border-color: var(--gold-color, #F2C94C);
            background: rgba(255,255,255,0.1);
            box-shadow: 0 0 10px rgba(242, 201, 76, 0.15);
        }
        .sub-form-simple input {
            background: transparent; border: none; outline: none;
            color: #fff; padding: 0.6rem 1rem; flex-grow: 1;
            font-size: 0.95rem;
        }
        .sub-form-simple button {
            background: var(--gold-color, #F2C94C);
            color: #050A1F; border: none;
            width: 36px; height: 36px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: all 0.3s;
        }
        .sub-form-simple button:hover {
            transform: scale(1.1);
            background: #fff;
        }

        @media (max-width: 600px) {
            .sub-form-simple { width: 100%; }
        }
    </style>

    <script>
        // LOGIC JS
        let tarotData = {};
        const SHEET_ID = '1Bqu2RBPRH-YeCOiX_5SjmQP8GETpKkqBZhMPZwqm_ig';
        const SHEET_NAME = 'Zodiac';

        async function fetchZodiacData() {
            const gvizUrl = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&sheet=${SHEET_NAME}`;
            setLoadingState(true);
            try {
                const response = await fetch(gvizUrl);
                if (!response.ok) throw new Error(`L·ªói HTTP! ${response.status}`);
                let text = await response.text();
                const jsonpData = text.match(/google\.visualization\.Query\.setResponse\((.*)\)/s);
                if (!jsonpData || !jsonpData[1]) throw new Error("L·ªói parse JSONP");
                const data = JSON.parse(jsonpData[1]);
                const rows = data.table.rows;
                const processedData = {};
                for (let i = 1; i < rows.length; i++) {
                    const row = rows[i].c;
                    const zodiacSign = row[0]?.v;
                    if (!zodiacSign) continue;
                    processedData[zodiacSign] = {
                        cardname: row[1]?.v || "N/A",
                        url: row[2]?.v || "https://placehold.co/300x500/142850/f0f0ff?text=No+Image",
                        keyword: row[3]?.v || "",
                        love: row[4]?.v || "<p>Ch∆∞a c√≥ th√¥ng tin.</p>",
                        job: row[5]?.v || "<p>Ch∆∞a c√≥ th√¥ng tin.</p>",
                        finance: row[6]?.v || "<p>Ch∆∞a c√≥ th√¥ng tin.</p>",
                        color: row[7]?.v || "N/A",
                        objects: row[8]?.v || "N/A",
                        locations: row[9]?.v || "N/A",
                        advice: row[10]?.v || "<p>Ch∆∞a c√≥ th√¥ng tin.</p>",
                    };
                }
                tarotData = processedData;
                setLoadingState(false);
                return true;
            } catch (error) {
                console.error(error);
                setLoadingState(false, true);
                return false;
            }
        }

        function setLoadingState(isLoading, isError = false) {
            const gridButtons = document.querySelectorAll('.zodiac-btn');
            const dropdownButtons = document.querySelectorAll('.zodiac-btn-dropdown');
            const dropdownToggle = document.getElementById('zodiac-dropdown-toggle');
            const mainZodiacName = document.getElementById('main-zodiac-name');
            const cardDisplay = document.getElementById('card-display');

            if (isLoading) {
                mainZodiacName.textContent = 'ƒêang t·∫£i...';
                cardDisplay.style.opacity = '0.5';
                gridButtons.forEach(btn => btn.disabled = true);
                dropdownButtons.forEach(btn => btn.disabled = true);
                if (dropdownToggle) dropdownToggle.disabled = true;
            } else {
                cardDisplay.style.opacity = '1';
                gridButtons.forEach(btn => btn.disabled = false);
                dropdownButtons.forEach(btn => btn.disabled = false);
                if (dropdownToggle) dropdownToggle.disabled = false;
                if (isError) {
                    mainZodiacName.textContent = 'L·ªói T·∫£i D·ªØ Li·ªáu';
                    cardDisplay.innerHTML = `<p style="text-align: center; color: #ff8a8a;">Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu.</p>`;
                } else {
                    mainZodiacName.textContent = 'B·∫°ch D∆∞∆°ng'; 
                }
            }
        }

        // (ƒê√É S·ª¨A) H√ÄM CHIA S·∫∫ HO·∫†T ƒê·ªòNG TH·ª∞C S·ª∞
        async function handleShare() {
            const zodiacName = document.getElementById('main-zodiac-name').textContent;
            const cardName = document.getElementById('card-name').textContent;
            const adviceContent = document.getElementById('card-advice-content').innerText.trim();
            
            const shareData = {
                title: `Th√¥ng ƒëi·ªáp Tarot cho ${zodiacName}`,
                text: `üîÆ H√¥m nay ${zodiacName} nh·∫≠n ƒë∆∞·ª£c l√° b√†i: ${cardName}.\n\nüí° L·ªùi khuy√™n: ${adviceContent.substring(0, 100)}...\n\nXem chi ti·∫øt t·∫°i:`,
                url: window.location.href
            };

            try {
                if (navigator.share) {
                    await navigator.share(shareData);
                } else {
                    // Fallback: Copy v√†o clipboard
                    const copyText = `${shareData.title}\n${shareData.text}\n${shareData.url}`;
                    await navigator.clipboard.writeText(copyText);
                    
                    // Hi·ªáu ·ª©ng n√∫t b·∫•m ƒë·ªÉ b√°o ƒë√£ copy
                    const shareBtn = document.getElementById('zodiac-share-btn');
                    const originalText = shareBtn.innerHTML;
                    shareBtn.innerHTML = '<i class="fa-solid fa-check"></i> ƒê√£ sao ch√©p!';
                    setTimeout(() => {
                        shareBtn.innerHTML = originalText;
                    }, 2000);
                }
            } catch (err) {
                console.error('L·ªói chia s·∫ª:', err);
            }
        }

        document.addEventListener('DOMContentLoaded', async () => {
            const zodiacSelector = document.getElementById('zodiac-selector');
            if (!zodiacSelector) return;

            const zodiacDropdownToggle = document.getElementById('zodiac-dropdown-toggle');
            const zodiacDropdownLabel = document.getElementById('zodiac-dropdown-label');
            const zodiacDropdownList = document.getElementById('zodiac-dropdown-list');
            const dropdownButtons = document.querySelectorAll('.zodiac-btn-dropdown');
            const gridButtons = document.querySelectorAll('.zodiac-btn');
            const mainZodiacName = document.getElementById('main-zodiac-name');
            const mainZodiacDate = document.getElementById('main-zodiac-date');
            
            const cardImage = document.getElementById('card-image');
            const cardPrefix = document.getElementById('card-prefix');
            const cardName = document.getElementById('card-name');
            const cardAdvice = document.getElementById('card-advice');
            const cardLove = document.getElementById('card-love').querySelector('p');
            const cardWork = document.getElementById('card-work').querySelector('p');
            const cardFinance = document.getElementById('card-finance').querySelector('p');
            const luckyColor = document.getElementById('lucky-color');
            const luckyItem = document.getElementById('lucky-item');
            const luckyPlace = document.getElementById('lucky-place');
            const cardAdviceContent = document.getElementById('card-advice-content');
            const shareBtn = document.getElementById('zodiac-share-btn'); 

            mainZodiacDate.textContent = new Date().toLocaleDateString('vi-VN');
            const success = await fetchZodiacData();
            if (!success) return;

            function updateZodiacContent(zodiacName) {
                const data = tarotData[zodiacName];
                mainZodiacName.textContent = zodiacName;
                if (data) {
                    const parts = (data.cardname || "").split(' ');
                    let prefix = '';
                    let name = data.cardname || "N/A";
                    if (parts.length > 1 && parts[0].toLowerCase() === 'the') {
                        prefix = parts[0];
                        name = parts.slice(1).join(' ');
                    }
                    cardImage.src = data.url;
                    cardImage.alt = `H√¨nh ·∫£nh l√° b√†i ${data.cardname}`;
                    cardPrefix.textContent = prefix;
                    cardName.textContent = name;
                    cardAdvice.textContent = data.keyword;
                    cardLove.innerHTML = data.love;
                    cardWork.innerHTML = data.job;
                    cardFinance.innerHTML = data.finance;
                    luckyColor.textContent = data.color;
                    luckyItem.textContent = data.objects;
                    luckyPlace.textContent = data.locations;
                    cardAdviceContent.innerHTML = data.advice;
                }
            }
            
            function setActiveZodiac(zodiacName) {
                gridButtons.forEach(btn => btn.classList.remove('active'));
                dropdownButtons.forEach(btn => btn.classList.remove('active'));
                const matchingGridBtn = document.querySelector(`.zodiac-btn[data-zodiac="${zodiacName}"]`);
                if (matchingGridBtn) matchingGridBtn.classList.add('active');
                const matchingDropdownBtn = document.querySelector(`.zodiac-btn-dropdown[data-zodiac="${zodiacName}"]`);
                if (matchingDropdownBtn) {
                    matchingDropdownBtn.classList.add('active');
                    if (zodiacDropdownLabel) zodiacDropdownLabel.innerHTML = matchingDropdownBtn.innerHTML;
                }
            }

            gridButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const zodiacName = button.dataset.zodiac;
                    setActiveZodiac(zodiacName);
                    updateZodiacContent(zodiacName);
                });
            });

            if (zodiacDropdownToggle) {
                zodiacDropdownToggle.addEventListener('click', () => {
                    zodiacDropdownList.classList.toggle('open');
                    zodiacDropdownToggle.classList.toggle('open');
                });
                dropdownButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        const zodiacName = button.dataset.zodiac;
                        setActiveZodiac(zodiacName);
                        updateZodiacContent(zodiacName);
                        zodiacDropdownList.classList.remove('open');
                        zodiacDropdownToggle.classList.remove('open');
                    });
                });
                document.addEventListener('click', (e) => {
                    if (document.querySelector('.zodiac-dropdown-container') && !document.querySelector('.zodiac-dropdown-container').contains(e.target)) {
                        zodiacDropdownList.classList.remove('open');
                        zodiacDropdownToggle.classList.remove('open');
                    }
                });
            }

            if (shareBtn) {
                shareBtn.addEventListener('click', handleShare);
            }

            updateZodiacContent('B·∫°ch D∆∞∆°ng');
            setActiveZodiac('B·∫°ch D∆∞∆°ng');
        });
    </script>
</BaseLayout>