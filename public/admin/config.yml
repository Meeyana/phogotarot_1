# public/admin/config.yml

# Cấu hình backend (Nơi lưu code)
backend:
  name: git-gateway # Dùng cổng Git của Netlify (đã bật ở Bước 1)
  branch: main # Tên nhánh GitHub chính của bạn. (Có thể là 'master', hãy kiểm tra lại)

# Cấu hình nơi tải ảnh lên
media_folder: "public/images/uploads" # Khi bạn tải ảnh, nó sẽ lưu vào đây
public_folder: "/images/uploads" # Đường dẫn public để chèn vào bài viết

# Định nghĩa các loại nội dung
collections:
  - name: "blog" # Tên của bộ sưu tập (để phân biệt)
    label: "Bài Viết" # Nhãn hiển thị trên giao diện admin
    folder: "src/content/blog" # <<< RẤT QUAN TRỌNG: Thư mục chứa các file .md của bạn
    create: true # Cho phép tạo file mới
    
    # (GIỮ NGUYÊN) Tên file .md sẽ lấy từ trường 'slug' bên dưới
    slug: "{{slug}}" 
    
    extension: "md" # Định dạng file
    format: "frontmatter" # Dùng frontmatter (cái dấu --- ở đầu file)

    # Đây là các ô nhập liệu sẽ xuất hiện trên giao diện
    fields:
      # Ô nhập Tiêu đề (GIỮ NGUYÊN - VẪN CÓ DẤU)
      - { label: "Tiêu đề", name: "title", widget: "string" }

      # (MỚI) Ô SLUG TỰ ĐỘNG - CHỈ Ô NÀY LÀ MẤT DẤU
      - label: "Slug (URL - Tự động, không dấu)"
        name: "slug"
        widget: "slug"
        based_on: "title"           # 1. Tự động tạo slug từ trường 'title'
        encoding: "ascii"         # 2. Chuyển 'à' thành 'a', 'ê' thành 'e'
        clean_accents: true       # 3. (Quan trọng nhất) Xóa bỏ mọi loại dấu
        sanitize_replacement: "-" # 4. Thay dấu cách ' ' bằng dấu '-'

      # Ô Ngày đăng (GIỮ NGUYÊN)
      - { label: "Ngày đăng", name: "pubDate", widget: "datetime", default: "{{now}}", format: "YYYY-MM-DD" }

      # Ô tải Ảnh đại diện (GIỮ NGUYÊN)
      - { label: "Ảnh đại diện (Thumbnail)", name: "image", widget: "image" }

      - label: "Chủ đề (Category)"
        name: "category"
        widget: "select"    # <--- Dùng widget 'select'
        required: true      # <--- Bắt buộc chọn 1 chủ đề
        options:            # <--- Danh sách 6 lựa chọn
          - "tarot căn bản"
          - "kỹ năng đọc bài"
          - "ý nghĩa lá bài"
          - "tarot theo tình huống"
          - "công cụ trải bài"
          - "tarot mở rộng"     

      # Ô nhập Mô tả ngắn (GIỮ NGUYÊN - VẪN CÓ DẤU)
      - { label: "Mô tả ngắn (Excerpt)", name: "excerpt", widget: "string" }

      # Ô soạn thảo Nội dung chính (GIỮ NGUYÊN - VẪN CÓ DẤU)
      - { label: "Nội dung chính", name: "body", widget: "markdown" }
      - { label: "Bài viết Nổi bật?", name: "isFeatured", widget: "boolean", default: false, required: false }